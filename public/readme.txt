		Curl-based API Debugger  -CAD-

	バージョン:　　ver.0.1.0
	リリース:　　　2023-02-23
	開発・配布元:　ACT Laboratory　(https://actlab.org/)
	主要開発者:　　吹雪
　　ソフト種別:　　オープンソースソフトウェア　(GitHubリポジトリ:https://github.com/actlaboratory/CAD/)
　　ライセンス:　　MIT License

第１章　はじめに
１．１　Curl-based API Debugger(CAD)の概要
Curl-based API Debugger(CAD)は、HTTPベースで構築されたAPIへのリクエストおよびJSONで返される結果の閲覧をWindows上で効率よく行えることを目指した開発者向けツールです。
基本的なCurlコマンドを、curlの代わりにCADで実行することで、リクエスト・レスポンスのログを記録したり、結果をGUI上で閲覧したりすることができます。
また、サービスプロバイダやエンドポイントを登録すると、GUI上の操作でAPIへのリクエストを送信することができます。
サーバプログラムの開発中に何度もAPIを実行してデバッグしたり、Curlコマンドが記載されたAPI仕様書を基にレスポンスを確認しながらクライアントプログラムを開発したりといった用途を想定しています。

１．２　動作環境について
64ビット版Windows10で動作確認を行っています。
多くの場合、Windowsの他のバージョンでも動作すると思われます。

第２章　セットアップ
２．１　インストール
CADを使用するに当たって、特別なインストール作業は必要ありません。
ダウンロードしたzipファイルを適当な場所に展開し、「CAD」フォルダ内の「CAD.exe」を実行すると起動することができます。

なお、必要に応じて環境変数PATHの設定を行ってください。

２．２　アンインストール
CADをコンピュータから削除する場合は、「CAD」フォルダを削除してください。
その他、特別な作業は不要です。

環境変数への追加を行っていた場合には、そちらも削除することをお勧めします。

２．３　アップデート
発見された不具合の修正、新機能の追加などの目的で、定期的にバージョンアップを行います。
新しいバージョンが利用可能な場合、CADの起動時にメッセージが表示されます。
指示に従って操作してください。


第３章　基本操作
この章では、CADを用いてリクエストの送信や結果の閲覧を行う様々な方法を説明します。
各メニュー項目や設定項目の詳細については、第４章を参照してください。

３．１　コマンドライン上でのCurl互換コマンドによる起動

curl互換のコマンドでリクエストを送信することができます。
環境変数PATHを設定するか、カレントディレクトリをCAD.exeのあるディレクトリにした状態で、下記のようにコマンドを実行します。
CADはすべてのcurlオプションに対応できているわけではありませんが、今後のアップデートで対応するオプションを徐々に追加していく予定です。

　　CAD -H "Content-type: application/json" -X POST -d {"key":"value} https://example.com/api/v1/hoge

CADが起動すると、受け付けたコマンドに基づいてリクエストを行い、結果を表示します。

３．２　コマンドライン上でのパイプを用いた起動

本家curlコマンドやwgetコマンド等でリクエストを行い、結果の確認のみにCADを用いる方法です。
CADは、起動時のオプションを指定せずに起動すると、標準入力で与えられた内容の画面表示を試みます。
これを利用して、下記のようなコマンドで使用することができます。

　　curl https://example.com/api/v1/info | CAD

この方法は、CADが対応していないcurlのオプションを使用したい場合や、API仕様書の作成・テスト等本家curlコマンドとの完全な互換を保証する必要のあるシーン等で有用です。

３．３　JSONファイルを指定して起動

メモ帳等のアプリケーションと同様に、コマンドライン引数でJSONファイル名を指定して起動することもできます。
この場合、起動時に読み込んだファイルを画面表示した状態で起動します。

JSONファイルをCADに関連付けしておくことも有用です。

３．４　オプションなしでの起動とGUI上でのリクエスト

GUI上でのリクエスト送信や履歴の確認を行う場合には、オプションも標準入力も不要です。
CADを起動すると空白の状態でウィンドウが表示されますので、メニューバーから目的の機能を呼び出して操作してください。


第４章　メニューリファレンス
ここでは、CADの各メニュー項目について解説します。
また、メニューを選択することによって表示される設定画面の内容についても記載しています。

各メニュー項目には、メニューを呼び出さずに該当する項目を実行できるショートカットキーが用意されている場合があります。
ショートカットキーは自由に変更できますが、ここでは初期値として設定されているショートカットキーを、「」で囲んで記載します。

４．１　ファイル
４．１．１　サービスプロバイダ一覧
サービスプロバイダと、そのプロバイダが提供するエンドポイントを設定し、それに基づいてリクエストの送信を行います。
サービスプロバイダとは、TwitterやGitHub、QiitaなどAPIを提供するサービスです。ベースとなるURLや通信方式、共通のヘッダを設定します。
エンドポイントとは、Twitterならツイート投稿、タイムライン取得など、URLと通信メソッド(GETやPOSTなど)の組によって定まる通信先です。メソッド・URL・追加のヘッダ・bodyなどが設定できます。
なお、エンドポイントのURL中では、{name}の形式でフィールドを定義することができます。ここで定義したフィールドに入る値や、「編集可能」を設定したヘッダ及びbodyの項目は、リクエストの都度変更できます。

４．１．２　新規リクエスト　「Ctrl+N」
サービスプロバイダの設定を使用せず、全ての情報をその場で入力してリクエストを送信します。

４．１．３　履歴
CADを通じて送信したリクエストの履歴を閲覧できます。CADでJSONや本家curlコマンドのレスポンスを閲覧しただけでは、ここに記録されない点に注意してください。
また、同様のリクエストの再送と履歴の削除ができます。
編集機能は、まだ利用できません。

４．２　編集
４．２．１　コピー　「Ctrl+C」
ツリービュー、もしくはリストビューで選択中の項目をコピーします。
ツリービューで実行した場合、キーの部分のみがコピー対象です。
リストビューで実行した場合、価の部分のみがコピー対象です。

４．３　Coming soon
４．４　Coming soon

４．５　オプション
４．５．１　オプション
CADの動作に関する様々な設定を行うことができます。
この項目を選択すると、各種設定を行うためのダイアログボックスが表示されます。

このダイアログボックスは、複数のタブ（ページ）で構成されています。
Ctrl+Tab、Ctrl+Shift+Tabを押すと、表示するタブを切り替えることができます。
また、画面上部に表示されているタブをクリックすることで、直接目的のタブを表示させることもできます。

設定を保存してダイアログボックスを閉じるには、[OK]ボタンを押します。
変更を破棄してダイアログボックスを閉じるには、[キャンセル]ボタンを押します。

４．５．１．１　一般
CADの動作全般に関する設定を行います。

４．３．１．１．１　ログ記録レベル
CADを起動すると、インストール先フォルダに「CAD.log」というファイルが作成され、動作のログが記録されます。
この設定を使用して、記録される動作のログの詳細度を設定します。CRITICALやERRORに設定すると、ほとんど記録されません。ログファイルの容量を減らすことができます。
逆に、DEBUGに設定すると、詳細な動作の記録を得ることができます。
ここでの設定は、CADの再起動後から有効になります。
万一不具合が発生した場合には、DEBUGレベルで動作を記録すると、原因の特定に活用することができます。
ただし、DEBUGレベルのログには、送受信しているメールの宛先や本文を含め、機微な情報が記録されます。
開発者の方や、開発者に情報提供いただけるパワーユーザーの方以外は、変更しないことを推奨します。

４．３．１．１．２　出力先
スクリーンリーダーに直接音声を出力して操作をガイドする場合の出力先を設定します。

４．５．１．２　表示/言語
画面表示に関する設定です。
また、CADの表示言語を変更することもできます。

４．５．１．２．１　言語
CADの表示や読み上げに使用する言語を設定します。
ただし、本ソフトウェアはまだ未完成のため、この設定を変更しても、一部の箇所にしか反映されません。
この設定を有効にするには、ソフトウェアの再起動が必要です。

４．５．１．２．２　画面表示モード
画面の表示方法を、[標準]、[反転表示]のどちらかに設定します。
規定では[標準]に設定されています。
この設定を有効にするには、ソフトウェアの再起動が必要です。

４．５．１．２．３　テキストの折り返し
複数行のエディットボックスで、長い行を折り返して表示するかどうかを設定します。
[画面幅で折り返し]を選択すると、画面幅に合わせて折り返しが行われます。
規定では[折り返さない]に設定されています。
この設定を有効にするには、ソフトウェアの再起動が必要です。


４．５．１．３　ネットワーク
本ソフトウェアのアップデートや、外部のサーバと通信する際に、プロキシサーバーを使用する場合に必要な設定を行います。

４．５．１．３．１　起動時に更新を確認
起動時にソフトウェアの更新を確認するかどうかを設定します。
この設定は、規定でチェックされています。

４．５．１．３．２　プロキシサーバーの情報を手動で設定する
プロキシサーバーの情報を手動で設定するかどうかを設定します。
通常、Windowsに設定されたプロキシサーバーの情報を使用して接続を行いますが、何らかの理由で個別に設定したい場合は、この設定をチェックしてください。

４．５．１．３．３　サーバーURL
[プロキシサーバーの情報を手動で設定する]が有効な場合に、プロキシサーバーのURLを設定します。

４．５．１．３．４　ポート番号
[プロキシサーバーの情報を手動で設定する]が有効な場合に、プロキシサーバーのポート番号を設定します。

４．５．２　ショートカットキーの設定
よく使う機能にショートカットキーを割り当てたり、すでに設定されている割り当てを変更したりできます。
ここで設定したショートカットキーは、CADのウインドウが前面に表示されている場合にのみ機能します。

[ショートカットキーの設定]ダイアログボックスには、以下の項目があります。
現在の登録内容：ショートカットキーを設定できるコマンドと、現在割り当てられているショートカットキーを表示します。該当する項目にショートカットキーが設定されていない場合は、「なし」と表示されます。
変更：選択した設定を変更します。
OK：設定を保存し、ダイアログボックスを閉じます。
キャンセル：設定を破棄し、ダイアログボックスを閉じます。

ショートカットキーを設定するには、以下の手順で操作します。
１．　[現在の登録内容]から、設定したい項目を選択します。
２．　[変更]ボタンを押します。
３．　[ショートカット1]の[設定]ボタンを押します。
４．　設定したいキーの組み合わせを押します。ショートカットキーの割り当てを削除したい場合は、Escapeキーを押します。
なお、１つのコマンドについて、ショートカットキーを最大５個設定できます。


４．６　ヘルプ
４．６．１　バージョン情報
CADのバージョン番号を確認できます。

４．６．３　更新を確認
新しいバージョンが利用可能かどうかを確認します。
画面の指示に従って操作してください。


第５章　その他
５．１　利用に当たっての注意事項
１．　CADのインストール先フォルダにある「save_history.dat」にはリクエスト履歴が、「save_sp.dat」には登録したサービスプロバイダやエンドポイントの情報が保存されます。
　　　使用方法によっては、API実行に必要なクレデンシャル等が保存されることもあるかと思われます。
　　　取り扱いには十分ご注意ください。
２．　CADはCurlコマンドとの互換を目指して開発していますが、内部ではPythonおよびrequestsモジュールを利用し、コマンドの解釈も独自で行っているため、細かな挙動に差異が生じている可能性があります。
　　　サーバプログラム開発後の最終的なテストや仕様書の確認、特定のAPIへのリクエストがうまく処理されない場合等には、本家curlコマンド等での実行をお勧めします。
３．　CADはWindows上で実行するソフトウェアですが、curlコマンドは多くの場合linux上での実行を前提に記載されています。
　　　そのため、仕様書等に記載されたcurlコマンドをそのままWindows上で実行する場合、シングルクオートやコマンド途中での開業の扱い、各種記号の扱いやエスケープが異なる点などには十分注意してください。
４．　CADの使用中、以下のようなメッセージが表示されることがあります。
----------
An error has occurred. Contact to the developer for further assistance.
----------
このメッセージは、ソフトウェアに何らかの問題が起きていることを表しています。[OK]ボタンを押すと、自動的にCADは終了します。
この現象が発生した場合、CADをインストールしたフォルダ内に「errorlog.txt」というファイルが作成されています。
このファイルの内容と、直前に行った操作の内容を、開発者までお知らせください。

５．２　連絡先
このソフトウェアを利用しての感想やご要望、不具合のご報告などは、以下のメールアドレスまたは掲示板へご連絡ください。

ACT Laboratory サポート：support@actlab.org
ACT Laboratory 掲示板：https://actlab.org/bbs/
